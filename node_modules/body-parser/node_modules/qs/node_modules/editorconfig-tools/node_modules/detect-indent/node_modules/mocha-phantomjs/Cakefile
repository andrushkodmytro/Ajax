fs      = require 'fs'
path    = require 'path'
async   = require 'async'
{print} = require 'util'
{spawn} = require 'child_process'

testCodes  = []

task 'build', 'Build project', ->
  build()

task 'test', 'Run tests', ->
  build -> test()

build = (callback) ->
  builder = (args...) ->
    (callback) ->
      coffeeCmd = 'coffee' + if process.platform is 'win32' then '.cmd' else ''
      coffee = spawn coffeeCmd, args
      coffee.stderr.on 'data', (data) -> process.stderr.write data.toString()
      co